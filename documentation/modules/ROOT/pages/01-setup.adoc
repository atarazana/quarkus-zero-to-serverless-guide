= Setup
include::_attributes.adoc[]
:project_name: %USERNAME%-{artifact_id}

[#getting-the-code]
== Getting the Code

. Time to get our hands dirty. Clone or download the code, your choice.
+
[.console-input]
[source,sh,subs="attributes+"]
----
git clone --single-branch --branch {git_ref} {git_base}/{git_uri}.git
----

. Change to the dir where the code is.
+
[.console-input]
[source,sh,subs="attributes+"]
----
cd {git_uri}/apps/{APP_NAME}
----

[#prerequisites]
== Prerequisites

IMPORTANT: You need JDK 8 or 11

. Setting demo environment variables
+
NOTE: _You must run:_ `$ . ./env.sh`
+
The `env.sh` has the following content:
+
[source,sh,subs="attributes+"]
---- 
export QUARKUS_VERSION={quarkus_version}
export GRAALVM_VERSION={graalvm_version}

GRAALVM_HOME=$(pwd)/graalvm-ce-java11-$\{GRAALVM_VERSION}
if [[ "$OSTYPE" == "darwin"* ]]; then GRAALVM_HOME=$\{GRAALVM_HOME}/Contents/Home ; fi
export GRAALVM_HOME
export PATH=$\{GRAALVM_HOME}/bin:$PATH

if [[ "$OSTYPE" == "linux"* ]]; then GRAALVM_OSTYPE=linux ; fi
if [[ "$OSTYPE" == "darwin"* ]]; then GRAALVM_OSTYPE=darwin ; fi
export GRAALVM_OSTYPE

export KNATIVE_CLI_VERSION={knative_version}
if [[ "$OSTYPE" == "linux"* ]]; then KNATIVE_OSTYPE=Linux ; fi
if [[ "$OSTYPE" == "darwin"* ]]; then KNATIVE_OSTYPE=Darwin ; fi
export KNATIVE_OSTYPE

export TEKTON_CLI_VERSION={tekton_version}
if [[ "$OSTYPE" == "linux"* ]]; then TEKTON_OSTYPE=Linux ; fi
if [[ "$OSTYPE" == "darwin"* ]]; then TEKTON_OSTYPE=Darwin ; fi
export TEKTON_OSTYPE

mkdir -p ./bin
export PATH=$(pwd)/bin:$PATH
----

. Download GraalVM and set GraaVM env
+
[.console-input]
[source,sh,role="copypaste"]
----
curl -OL https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-${GRAALVM_VERSION}/graalvm-ce-java11-${GRAALVM_OSTYPE}-amd64-${GRAALVM_VERSION}.tar.gz

tar xvzf graalvm-ce-java11-${GRAALVM_OSTYPE}-amd64-${GRAALVM_VERSION}.tar.gz
----

. Install native image for GraalVM
+
[.console-input]
[source,sh,role="copypaste"]
----
gu install native-image
----

. Login to your Openshift cluster `oc login ...`

. Create a project or use an already existing one
+
[.console-input]
[source,sh,subs="attributes+",role="copypaste"]
----
oc new-project ${PROJECT_NAME}
----